document.addEventListener("DOMContentLoaded", function(e) {
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://cdn.jsdelivr.net/gh/ngockush/toaster_apicodevn@main/apicodevn_alert/assets/css/style.min.css';
    var head = document.head || document.getElementsByTagName('head')[0];
    head.appendChild(link);
    if (!window.jQuery) {
        var jquery_script = document.createElement('script');
        jquery_script.src = 'https://cdn.jsdelivr.net/gh/ngockush/toaster_apicodevn@main/apicodevn_alert/assets/js/jquery.js';
        document.head.appendChild(jquery_script);
    }
    console.log('Toaster alert Copyright @ https://apicodevn.com');
    console.log('Vui lòng sao chép dưới mọi hình thức vì nó chả cao siêu gì :3');
});
class ApicodeVN {
    constructor() {
        this.container = null;
    }
    status_detect(status) {
        if (status == 'warning') {
            return {
                icon: "https://cdn.jsdelivr.net/gh/ngockush/toaster_apicodevn@main/apicodevn_alert/assets/image/595067.png",
                alertClass: "apicodevn-warning"
            }
        } else if (status == 'danger') {
            return {
                icon: "https://cdn.jsdelivr.net/gh/ngockush/toaster_apicodevn@main/apicodevn_alert/assets/image/2737906.png",
                alertClass: "apicodevn-danger"
            }
        } else if (status == 'success') {
            return {
                icon: "https://cdn.jsdelivr.net/gh/ngockush/toaster_apicodevn@main/apicodevn_alert/assets/image/7518748.png",
                alertClass: "apicodevn-success"
            }
        } else if (status == 'info') {
            return {
                icon: "https://cdn.jsdelivr.net/gh/ngockush/toaster_apicodevn@main/apicodevn_alert/assets/image/3674690.png",
                alertClass: "apicodevn-info"
            }
        } else if (status == 'loading') {
            return {
                icon: "https://cdn.jsdelivr.net/gh/ngockush/toaster_apicodevn@main/apicodevn_alert/assets/image/loading.svg",
                alertClass: "apicodevn-secondary"
            }
        } else {
            return {
                icon: "https://cdn.jsdelivr.net/gh/ngockush/toaster_apicodevn@main/apicodevn_alert/assets/image/1827370.png",
                alertClass: ""
            }
        }
    }
    remove_alert() {
        const container = this.container;
        container.fadeOut(300, function() {
            container.remove();
        });
    }
    creater_body(args) {
            const { icon, alertClass } = this.status_detect(args.status || null);
            this.container.html(`<div class="alert-container ${alertClass}"><div class="alert-body">
                                    <div class="alert-icon"><img src="${args.icon || icon}" alt="status icon"><strong>${args.title}</strong></div>
                                    ${args.message ? `<div class="alert-content">${args.message}</div>` : ''}
                                    <button type="button" class="btn-alert-close"><img src="https://cdn.jsdelivr.net/gh/ngockush/toaster_apicodevn@main/apicodevn_alert/assets/image/9068678.png" alt="close alert"></button>
                                </div></div>`);
        this.container.hide();
    }
    toast(args) {
        //Tao làm bằng jQuery đơn giản bởi vì tao thích
        var check_toaster = document.querySelector('.apicodevn-container');
        if (check_toaster) check_toaster.remove();
        const toaster = this;
        const container = jQuery('<div>', {
            role: "alert",
            class: "apicodevn-container"
        });
        this.container = container;
        this.creater_body(args);
        jQuery('body').append(container.fadeIn(200));
        jQuery('.btn-alert-close').click(() => toaster.remove_alert());
        if (args.timeout) {
            setTimeout(() => toaster.remove_alert(), args.timeout);
        }
        document.addEventListener('click', function (event) {
            // Kiểm tra xem nguồn sự kiện nhấp chuột có phải là container hoặc closeButton hay không
            var container = document.querySelector('.alert-container');
            var closeButton = document.querySelector('.btn-alert-close');
            var target = event.target;
            if (target !== container && !container.contains(target) && target !== closeButton) {
                toaster.remove_alert();
            }
        });
    }
}
var apicodevn = new ApicodeVN();